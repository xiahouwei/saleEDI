(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order"],{"07d8":function(t,e,a){"use strict";var i=a("5aee"),r=a("9f79"),n="Set";t.exports=a("ada4")(n,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,n),t=0===t?0:t,t)}},i)},"090c":function(t,e,a){},"097e":function(t,e,a){},"0b64":function(t,e,a){var i=a("f772"),r=a("9003"),n=a("5168")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[n],null===e&&(e=void 0))),void 0===e?Array:e}},"0fe2":function(t,e,a){"use strict";var i=a("097e"),r=a.n(i);r.a},"11e9":function(t,e,a){var i=a("52a7"),r=a("4630"),n=a("6821"),s=a("6a99"),o=a("69a8"),c=a("c69a"),l=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?l:function(t,e){if(t=n(t),e=s(e,!0),c)try{return l(t,e)}catch(a){}if(o(t,e))return r(!i.f.call(t,e),t[e])}},"1af6":function(t,e,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"20fd":function(t,e,a){"use strict";var i=a("d9f6"),r=a("aebd");t.exports=function(t,e,a){e in t?i.f(t,e,r(0,a)):t[e]=a}},"39b6":function(t,e,a){},"3b2b":function(t,e,a){var i=a("7726"),r=a("5dbc"),n=a("86cc").f,s=a("9093").f,o=a("aae3"),c=a("0bfb"),l=i.RegExp,d=l,u=l.prototype,f=/a/g,v=/a/g,m=new l(f)!==f;if(a("9e1e")&&(!m||a("79e5")(function(){return v[a("2b4c")("match")]=!1,l(f)!=f||l(v)==v||"/a/i"!=l(f,"i")}))){l=function(t,e){var a=this instanceof l,i=o(t),n=void 0===e;return!a&&i&&t.constructor===l&&n?t:r(m?new d(i&&!n?t.source:t,e):d((i=t instanceof l)?t.source:t,i&&n?c.call(t):e),a?this:u,l)};for(var h=function(t){t in l||n(l,t,{configurable:!0,get:function(){return d[t]},set:function(e){d[t]=e}})},p=s(d),b=0;p.length>b;)h(p[b++]);u.constructor=l,l.prototype=u,a("2aba")(i,"RegExp",l)}a("7a56")("RegExp")},"42d4":function(t,e,a){"use strict";var i=a("e248"),r=a.n(i);r.a},4517:function(t,e,a){var i=a("a22a");t.exports=function(t,e){var a=[];return i(t,!1,a.push,a,e),a}},"469f":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("7d7b")},"4d4c":function(t,e,a){"use strict";var i=a("9b28"),r=a.n(i);r.a},5127:function(t,e,a){},"549b":function(t,e,a){"use strict";var i=a("d864"),r=a("63b6"),n=a("241e"),s=a("b0dc"),o=a("3702"),c=a("b447"),l=a("20fd"),d=a("7cd6");r(r.S+r.F*!a("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,r,u,f=n(t),v="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,p=void 0!==h,b=0,y=d(f);if(p&&(h=i(h,m>2?arguments[2]:void 0,2)),void 0==y||v==Array&&o(y))for(e=c(f.length),a=new v(e);e>b;b++)l(a,b,p?h(f[b],b):f[b]);else for(u=y.call(f),a=new v;!(r=u.next()).done;b++)l(a,b,p?s(u,h,[r.value,b],!0):r.value);return a.length=b,a}})},"57b1":function(t,e,a){var i=a("d864"),r=a("335c"),n=a("241e"),s=a("b447"),o=a("bfac");t.exports=function(t,e){var a=1==t,c=2==t,l=3==t,d=4==t,u=6==t,f=5==t||u,v=e||o;return function(e,o,m){for(var h,p,b=n(e),y=r(b),C=i(o,m,3),D=s(y.length),g=0,k=a?v(e,D):c?v(e,0):void 0;D>g;g++)if((f||g in y)&&(h=y[g],p=C(h,g,b),t))if(a)k[g]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:k.push(h)}else if(d)return!1;return u?-1:l||d?d:k}}},"57e3":function(t,e,a){a("68f7")("Set")},"5aee":function(t,e,a){"use strict";var i=a("d9f6").f,r=a("a159"),n=a("5c95"),s=a("d864"),o=a("1173"),c=a("a22a"),l=a("30f1"),d=a("50ed"),u=a("4c95"),f=a("8e60"),v=a("ebfd").fastKey,m=a("9f79"),h=f?"_s":"size",p=function(t,e){var a,i=v(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,l){var d=t(function(t,i){o(t,d,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[h]=0,void 0!=i&&c(i,a,t[l],t)});return n(d.prototype,{clear:function(){for(var t=m(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[h]=0},delete:function(t){var a=m(this,e),i=p(a,t);if(i){var r=i.n,n=i.p;delete a._i[i.i],i.r=!0,n&&(n.n=r),r&&(r.p=n),a._f==i&&(a._f=r),a._l==i&&(a._l=n),a[h]--}return!!i},forEach:function(t){m(this,e);var a,i=s(t,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){i(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(t){return!!p(m(this,e),t)}}),f&&i(d.prototype,"size",{get:function(){return m(this,e)[h]}}),d},def:function(t,e,a){var i,r,n=p(t,e);return n?n.v=a:(t._l=n={i:r=v(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=n),i&&(i.n=n),t[h]++,"F"!==r&&(t._i[r]=n)),t},getEntry:p,setStrong:function(t,e,a){l(t,e,function(t,a){this._t=m(t,e),this._k=a,this._l=void 0},function(){var t=this,e=t._k,a=t._l;while(a&&a.r)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?d(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,d(1))},a?"entries":"values",!a,!0),u(e)}}},"5d73":function(t,e,a){t.exports=a("469f")},"5dbc":function(t,e,a){var i=a("d3f4"),r=a("8b97").set;t.exports=function(t,e,a){var n,s=e.constructor;return s!==a&&"function"==typeof s&&(n=s.prototype)!==a.prototype&&i(n)&&r&&r(t,n),t}},"5e21":function(t,e,a){},"68f7":function(t,e,a){"use strict";var i=a("63b6"),r=a("79aa"),n=a("d864"),s=a("a22a");t.exports=function(t){i(i.S,t,{from:function(t){var e,a,i,o,c=arguments[1];return r(this),e=void 0!==c,e&&r(c),void 0==t?new this:(a=[],e?(i=0,o=n(c,arguments[2],2),s(t,!1,function(t){a.push(o(t,i++))})):s(t,!1,a.push,a),new this(a))}})}},"6f4e":function(t,e,a){},7075:function(t,e,a){"use strict";var i=a("63b6");t.exports=function(t){i(i.S,t,{of:function(){var t=arguments.length,e=new Array(t);while(t--)e[t]=arguments[t];return new this(e)}})}},7383:function(t,e,a){},"74be":function(t,e,a){var i=a("63b6");i(i.P+i.R,"Set",{toJSON:a("f228")("Set")})},"768b":function(t,e,a){"use strict";var i=a("a745"),r=a.n(i);function n(t){if(r()(t))return t}var s=a("5d73"),o=a.n(s);function c(t,e){var a=[],i=!0,r=!1,n=void 0;try{for(var s,c=o()(t);!(i=(s=c.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(l){r=!0,n=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(r)throw n}}return a}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(t,e){return n(t)||c(t,e)||l()}a.d(e,"a",function(){return d})},"774e":function(t,e,a){t.exports=a("d2d5")},"7a27":function(t,e,a){},"7d7b":function(t,e,a){var i=a("e4ae"),r=a("7cd6");t.exports=a("584a").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},"7e7a":function(t,e,a){"use strict";var i=a("5127"),r=a.n(i);r.a},"7f7f":function(t,e,a){var i=a("86cc").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,s="name";s in r||a("9e1e")&&i(r,s,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},8322:function(t,e,a){"use strict";var i=a("7383"),r=a.n(i);r.a},"83a0":function(t,e,a){"use strict";a.r(e),a.d(e,"reportSumAddUnitFunc",function(){return r});a("c5f6"),a("ac6a");var i=a("d0dd");function r(t,e){var a=t.columns,r=t.data,n=[];return a.forEach(function(t,a){if(0!==a){var s=r.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?n[a]="":(n[a]=s.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),e.forEach(function(e){t.property===e&&(n[a]="".concat(i["a"].toFixedSHW(n[a],2)," 元"))}))}else n[a]="合计"}),n}},"84df":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-tag",{attrs:{mark:"",type:t.tagType,size:"large"}},[t._v(t._s(t.billStateText))])},r=[],n={name:"stateTag",props:{billState:String},computed:{billStateText:function(){var t="";switch(this.billState){case"1":t="待确认";break;case"2":t="待收货";break;case"3":t="已完成";break}return t},tagType:function(){var t="";switch(this.billState){case"1":t="danger";break;case"2":t="primary";break;case"3":t="success";break}return t}}},s=n,o=a("0c7c"),c=Object(o["a"])(s,i,r,!1,null,null,null);e["a"]=c.exports},"8aff":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-order-details"},[a("div",{staticClass:"order-details-warp"},[a("div",{staticClass:"order-details-box"},[a("div",{staticClass:"order-details fx-edi-block"},[a("div",{staticClass:"order-ent"},[t._v("企业名称："+t._s(t.orderDetailsData.companyName))]),a("div",{staticClass:"order-details-item"},[a("div",{staticClass:"order-item-cell"},[t._v("订单编号："+t._s(t.orderDetailsData.billNo))]),a("div",{staticClass:"order-item-cell"},[t._v("收货机构："+t._s(t.orderDetailsData.customerName))]),a("div",{staticClass:"order-item-cell"},[t._v("明细数量："+t._s(t.orderDetailsData.billDtCount))]),a("div",{staticClass:"order-item-cell"},[t._v("数量合计："+t._s(t.orderDetailsData.goodsCount))]),a("div",{staticClass:"order-item-cell"},[t._v("金额总计："+t._s(t.orderDetailsData.sumMoneyWithTax))])]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:"1"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '1'"}],staticClass:"details-edit-btn",attrs:{size:"mini",type:"primary",plain:""},on:{click:t.detailsEditClick}},[t._v("修改")]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:"2"===t.orderDetailsData.billState||"3"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '2' || orderDetailsData.billState === '3'"}],staticClass:"details-edit-btn",attrs:{size:"mini",type:"primary",plain:""},on:{click:t.watchEditClick}},[t._v("查看")])],1)]),a("div",{staticClass:"order-address fx-edi-block"},[a("div",{staticClass:"order-address-cell"},[a("div",{staticClass:"address-key"},[t._v("收货人：")]),a("div",[t._v(t._s(t.addressData.consignee))])]),a("div",{staticClass:"order-address-cell"},[a("div",{staticClass:"address-key"},[t._v("联系方式：")]),a("div",[t._v(t._s(t.addressData.telePhone))])]),a("div",{staticClass:"order-address-cell"},[a("div",{staticClass:"address-key"},[t._v("收货地址：")]),a("div",{staticClass:"address-value"},[t._v(t._s(t.addressData.address))])]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:"1"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '1'"}],staticClass:"address-edit-btn",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.addressEditClick()}}},[t._v("修改")])],1),a("div",{staticClass:"order-info fx-edi-block"},[a("div",{staticClass:"infor-key"},[t._v("备注信息：")]),a("van-field",{directives:[{name:"show",rawName:"v-show",value:"1"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '1'"}],staticClass:"info-value",attrs:{maxlength:"50",type:"textarea",placeholder:"请输入备注信息(最多输入50个字符)",rows:"3"},model:{value:t.orderDetailsData.remark,callback:function(e){t.$set(t.orderDetailsData,"remark",e)},expression:"orderDetailsData.remark"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.orderDetailsData.billState,expression:"orderDetailsData.billState !== '1'"}],staticClass:"info-value"},[t._v(t._s(t.orderDetailsData.remark))])],1),a("div",{staticClass:"order-file fx-edi-block"},[a("div",{staticClass:"order-file-cell"},[a("div",{staticClass:"file-key"},[t._v("附件资料：")]),a("div",[a("label",{staticClass:"upload-label",attrs:{for:"file"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:"1"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '1'"}],staticClass:"upload-img-icon fl-l"})]),a("i",{directives:[{name:"show",rawName:"v-show",value:t.watchFileBtnShow,expression:"watchFileBtnShow"}],staticClass:"watch-file-icon fl-l",on:{click:t.onWatchClick}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",attrs:{type:"file",id:"file",accept:"image/*",mutiple:"mutiple"},on:{change:t.getFile}})])])])]),a("div",{staticClass:"order-details-bottom"},[a("div",{staticClass:"order-bottom-sumprice fx-price-font"},[t._v("￥"+t._s(t.orderDetailsData.sumMoneyWithTax))]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:"1"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '1'"}],attrs:{type:"primary",square:""},on:{click:t.confirm}},[t._v("确认提交")]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:"2"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '2'"}],attrs:{type:"warning",square:""},on:{click:t.receivingHandler}},[t._v("确认收货")]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:"3"===t.orderDetailsData.billState,expression:"orderDetailsData.billState === '3'"}],attrs:{type:"danger",square:""},on:{click:t.buyAgainHandler}},[t._v("再来一单")])],1)])},r=[],n=(a("3b2b"),a("795b")),s=a.n(n),o={name:"orderDetails",data:function(){return{orderDetailsData:{},addressData:{},orderInfo:"",queryId:"",previewSrc:""}},created:function(){var t=this;this.$fxEventBus.$on("changeSelectAddress",function(e){t.addressData=e,t.orderDetailsData.receiptInfoId=e.id})},beforeRouteEnter:function(t,e,a){"/addressList"!==e.path?a(function(t){t.getBillAndDetails().then(function(e){t.previewSrc="",e.receiptInfoId&&t.getCurrentAddress(e.receiptInfoId)})}):a()},computed:{watchFileBtnShow:function(){return""!==this.previewSrc||"2"===this.orderDetailsData.billState||"3"===this.orderDetailsData.billState}},methods:{getBillAndDetails:function(){var t=this;return new s.a(function(e){var a={id:t.$route.query.id};t.$fxHttp.requestPost({url:"".concat(t.$fxBaseApi.url,"/getBillAndDetails"),data:a}).then(function(a){t.orderDetailsData=a,e(a)})})},getCurrentAddress:function(t){var e=this,a={id:t};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/getReceipt"),data:a}).then(function(t){e.addressData=t})},detailsEditClick:function(){var t=this.orderDetailsData.companyId,e=this.orderDetailsData.companyName,a=this.orderDetailsData.planId,i=this.orderDetailsData.organId,r=this.orderDetailsData.organName,n=this.orderDetailsData.receiptInfoId;this.$router.push({path:"/orderItemDetails",query:{id:this.$route.query.id,companyId:t,companyName:e,planID:a,rdcId:i,rdcName:r,receiptInfoId:n,billState:"1"}})},watchEditClick:function(){var t=this.orderDetailsData.companyId,e=this.orderDetailsData.companyName,a=this.orderDetailsData.planId,i=this.orderDetailsData.organId,r=this.orderDetailsData.organName,n=this.orderDetailsData.receiptInfoId,s=this.orderDetailsData.billState;this.$router.push({path:"/orderItemDetails",query:{id:this.$route.query.id,companyId:t,companyName:e,planID:a,rdcId:i,rdcName:r,receiptInfoId:n,billState:s}})},addressEditClick:function(t){this.$router.push({path:"/addressList",query:{select:!0,defaultId:t}})},confirm:function(){var t=this,e={id:this.orderDetailsData.id,remark:this.orderDetailsData.remark,consignee:this.addressData.consignee,telePhone:this.addressData.telePhone,address:this.addressData.address,region:this.addressData.region};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/comfirmBill"),data:e}).then(function(e){t.sendBill(),window.history.go(-1)})},sendBill:function(){var t={id:this.orderDetailsData.id};this.$fxHttp.requestGet({url:"".concat(this.$fxBaseApi.url,"/sendBill"),data:t}).then(function(t){})},receivingHandler:function(){var t=this,e={id:this.orderDetailsData.id};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/completeBill"),data:e}).then(function(e){t.$toast.success("确认收货成功"),window.history.go(-1)})},buyAgainHandler:function(){console.log("再来一单")},onWatchClick:function(){var t=""===this.previewSrc?a("e344"):this.previewSrc;this.$ImagePreview([t])},getFile:function(t){var e=this,a=t.target.files[0];if(!a)return!1;var i=a.type,r=(a.size,new RegExp(/image\/png|image\/jpg|image\/jpeg/));if(!r.test(i))return this.$toast.fail("上传图片只支持png,jpg,jpeg格式!"),!1;if(!t||!window.FileReader)return this.$toast.fail("选取图片失败!"),!1;var n=new FileReader;n.readAsDataURL(a),n.onloadend=function(){var t=new Image;t.src=n.result,t.onload=function(){e.previewSrc=n.result}}}}},c=o,l=(a("9601"),a("0c7c")),d=Object(l["a"])(c,i,r,!1,null,"73210aae",null);e["default"]=d.exports},"8b97":function(t,e,a){var i=a("d3f4"),r=a("cb7c"),n=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,a){return n(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:n}},9093:function(t,e,a){var i=a("ce10"),r=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},9601:function(t,e,a){"use strict";var i=a("7a27"),r=a.n(i);r.a},"9b28":function(t,e,a){},"9baa":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-create-order"},[a("div",{staticClass:"create-order-ent fx-edi-block"},[a("div",{staticClass:"create-order-title"},[t._v("确认订货对象")]),a("div",{staticClass:"ent-block"},[a("div",{staticClass:"ent-title"},[t._v(t._s(this.$route.query.companyName))]),a("div",{staticClass:"order-rdc-list-ul"},[a("van-radio-group",{staticClass:"distribution-centers-list radio-list",model:{value:t.RDCValue,callback:function(e){t.RDCValue=e},expression:"RDCValue"}},t._l(t.RDCList,function(e,i){return a("van-radio",{key:i,staticClass:"radio-item",attrs:{name:i}},[t._v(t._s(e.name))])}),1)],1)])]),t._m(0),a("div",{staticClass:"create-order-plan fx-edi-block"},[a("div",{staticClass:"create-order-title"},[t._v("确认订货方案")]),a("div",{staticClass:"order-plan-list-ul"},[a("van-radio-group",{staticClass:"order-plan-list radio-list",model:{value:t.planValue,callback:function(e){t.planValue=e},expression:"planValue"}},t._l(t.planList,function(e,i){return a("van-radio",{key:i,staticClass:"radio-item",attrs:{name:i}},[t._v(t._s(e.planName))])}),1)],1)]),a("div",{staticClass:"create-order-bottom"},[a("van-button",{staticClass:"begin-order-btn",attrs:{type:"primary",round:""},on:{click:t.beginOrder}},[t._v("开始订货")])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"next-step"},[a("i",{staticClass:"next-step-icon"})])}],n=(a("7f7f"),{name:"createOrder",data:function(){return{RDCValue:"",planValue:"",RDCList:[],planList:[]}},created:function(){this.getAllRDC()},watch:{RDCValue:function(t){var e=this.RDCList[t].id;this.getAllOrderPlan(e)}},methods:{getAllRDC:function(){var t=this,e={companyName:this.$route.query.companyName};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/getAllDC"),data:e}).then(function(e){t.RDCList=e})},getAllOrderPlan:function(t){var e=this,a={companyName:this.$route.query.companyName,sellerId:t};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/getAllOrderPlan"),data:a}).then(function(t){e.planList=t})},beginOrder:function(){if(0===this.RDCList.length||0===this.planList.length||""===this.RDCValue||""===this.planValue)return!1;var t=this.$route.query.companyId,e=this.$route.query.companyName,a=this.planList[this.planValue].id,i=this.planList[this.planValue].arriveDateInterval,r=this.RDCList[this.RDCValue].id,n=this.RDCList[this.RDCValue].name;this.$router.push({path:"/orderItemDetails",query:{companyId:t,companyName:e,planID:a,rdcId:r,rdcName:n,arriveDateInterval:i}})}}}),s=n,o=(a("ac91"),a("0c7c")),c=Object(o["a"])(s,i,r,!1,null,"66a4f798",null);e["default"]=c.exports},"9f79":function(t,e,a){var i=a("f772");t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},a118:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-order-ent"},[a("van-collapse",{staticClass:"ent-collapse",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.orderEntData,function(e,i){return a("van-collapse-item",{key:i,attrs:{name:i}},[a("div",{staticClass:"ent-collapse-ent",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),t._l(e.center,function(e,i){return a("div",{key:i,staticClass:"ent-collapse-rdc"},[t._v(t._s(e.name))])})],2)}),1),a("div",{staticClass:"order-ent-bottom"},[a("van-button",{staticClass:"add-btn",attrs:{type:"primary",round:""},on:{click:t.addEntClick}},[t._v("+ 添加订货企业")])],1)],1)},r=[],n=(a("cadf"),a("551c"),a("f751"),a("097d"),{name:"orderEnt",data:function(){return{activeNames:[],orderEntData:[]}},created:function(){this.getCompany()},methods:{addEntClick:function(){this.$router.push({path:"/bindEnt",query:{notFirst:!0}})},getCompany:function(){var t=this;this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/getOrderCompany")}).then(function(e){t.orderEntData=e})}}}),s=n,o=(a("4d4c"),a("0c7c")),c=Object(o["a"])(s,i,r,!1,null,"088c88ff",null);e["default"]=c.exports},a745:function(t,e,a){t.exports=a("f410")},aa77:function(t,e,a){var i=a("5ca1"),r=a("be13"),n=a("79e5"),s=a("fdef"),o="["+s+"]",c="​",l=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),u=function(t,e,a){var r={},o=n(function(){return!!s[t]()||c[t]()!=c}),l=r[t]=o?e(f):s[t];a&&(r[a]=l),i(i.P+i.F*o,"String",r)},f=u.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},aae3:function(t,e,a){var i=a("d3f4"),r=a("2d95"),n=a("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==r(t))}},ac91:function(t,e,a){"use strict";var i=a("6f4e"),r=a.n(i);r.a},ada4:function(t,e,a){"use strict";var i=a("e53d"),r=a("63b6"),n=a("ebfd"),s=a("294c"),o=a("35e8"),c=a("5c95"),l=a("a22a"),d=a("1173"),u=a("f772"),f=a("45f2"),v=a("d9f6").f,m=a("57b1")(0),h=a("8e60");t.exports=function(t,e,a,p,b,y){var C=i[t],D=C,g=b?"set":"add",k=D&&D.prototype,w={};return h&&"function"==typeof D&&(y||k.forEach&&!s(function(){(new D).entries().next()}))?(D=e(function(e,a){d(e,D,t,"_c"),e._c=new C,void 0!=a&&l(a,b,e[g],e)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in k&&(!y||"clear"!=t)&&o(D.prototype,t,function(a,i){if(d(this,D,t),!e&&y&&!u(a))return"get"==t&&void 0;var r=this._c[t](0===a?0:a,i);return e?this:r})}),y||v(D.prototype,"size",{get:function(){return this._c.size}})):(D=p.getConstructor(e,t,b,g),c(D.prototype,a),n.NEED=!0),f(D,t),w[t]=D,r(r.G+r.W+r.F,w),y||p.setStrong(D,t,b),D}},b6d0:function(t,e,a){t.exports=a("fa2b")},bfac:function(t,e,a){var i=a("0b64");t.exports=function(t,e){return new(i(t))(e)}},c102:function(t,e,a){"use strict";var i=a("39b6"),r=a.n(i);r.a},c5f6:function(t,e,a){"use strict";var i=a("7726"),r=a("69a8"),n=a("2d95"),s=a("5dbc"),o=a("6a99"),c=a("79e5"),l=a("9093").f,d=a("11e9").f,u=a("86cc").f,f=a("aa77").trim,v="Number",m=i[v],h=m,p=m.prototype,b=n(a("2aeb")(p))==v,y="trim"in String.prototype,C=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():f(e,3);var a,i,r,n=e.charCodeAt(0);if(43===n||45===n){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var s,c=e.slice(2),l=0,d=c.length;l<d;l++)if(s=c.charCodeAt(l),s<48||s>r)return NaN;return parseInt(c,i)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(b?c(function(){p.valueOf.call(a)}):n(a)!=v)?s(new h(C(e)),a,m):C(e)};for(var D,g=a("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;g.length>k;k++)r(h,D=g[k])&&!r(m,D)&&u(m,D,d(h,D));m.prototype=p,p.constructor=m,a("2aba")(i,v,m)}},c6fb:function(t,e,a){a("7075")("Set")},d2d5:function(t,e,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},d432:function(t,e,a){},dc7b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-report-form"},[a("van-tabs",{staticClass:"report-form-tab",attrs:{color:"#4c96f3"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"按单据统计"}}),a("van-tab",{attrs:{title:"按货品统计"}})],1),a("van-cell-group",{staticClass:"order-search-filter"},[a("div",{staticClass:"date-cell"},[a("van-field",{attrs:{readonly:"",label:"查询日期",placeholder:"起始时间"},on:{click:t.beginDateClick},model:{value:t.beginDate,callback:function(e){t.beginDate=e},expression:"beginDate"}}),a("van-field",{attrs:{readonly:"",label:"至",placeholder:"结束时间"},on:{click:t.endDateClick},model:{value:t.enDate,callback:function(e){t.enDate=e},expression:"enDate"}})],1),a("van-field",{attrs:{readonly:"",label:"订货企业",placeholder:"请选择订货企业"},on:{click:function(e){t.companyListShow=!0}},model:{value:t.orderEnt,callback:function(e){t.orderEnt=e},expression:"orderEnt"}}),a("van-field",{attrs:{readonly:"",label:"订单状态",placeholder:"请选择订单状态"},on:{click:function(e){t.stateListShow=!0}},model:{value:t.orderStateText,callback:function(e){t.orderStateText=e},expression:"orderStateText"}},[a("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:t.searchHandler},slot:"button"},[t._v("搜索")])],1)],1),a("div",{staticClass:"report-form-warp"},[a("w-table",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"report-table",attrs:{tableData:t.reportOrderData,"show-summary":"","summary-method":t.getSum},on:{rowClick:t.rowClickHandle}},[a("w-table-column",{attrs:{prop:"companyName",label:"订货企业",align:"left"}}),a("w-table-column",{attrs:{prop:"orderBillAmount",label:"订单数量"}}),a("w-table-column",{attrs:{prop:"orderSumMoney",label:"订货总金额",align:"right"}}),a("w-table-column",{attrs:{prop:"deliverySumMoney",label:"发货总金额",align:"right"}})],1),a("w-table",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"report-table",attrs:{tableData:t.reportGoodsData,"show-summary":"","summary-method":t.getSumGoodsReport}},[a("w-table-column",{attrs:{prop:"goodsName",label:"品项名称",align:"left"}}),a("w-table-column",{attrs:{prop:"unitName",label:"品项单位"}}),a("w-table-column",{attrs:{prop:"orderAmount",label:"订货总数量",align:"right"}}),a("w-table-column",{attrs:{prop:"deliverySumMoney",label:"发货总金额",align:"right"}})],1)],1),a("van-popup",{attrs:{position:"bottom"},model:{value:t.datePickerShow,callback:function(e){t.datePickerShow=e},expression:"datePickerShow"}},[a("van-datetime-picker",{attrs:{type:"date",formatter:t.dataPickerFormatter},on:{confirm:t.dataConfirmhandle},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),a("van-actionsheet",{attrs:{actions:t.companyList,"cancel-text":"取消"},on:{select:t.onCompanySelect},model:{value:t.companyListShow,callback:function(e){t.companyListShow=e},expression:"companyListShow"}}),a("van-actionsheet",{attrs:{actions:t.stateList,"cancel-text":"取消"},on:{select:t.onStateSelect},model:{value:t.stateListShow,callback:function(e){t.stateListShow=e},expression:"stateListShow"}})],1)},r=[],n=a("768b"),s=(a("7f7f"),a("83a0")),o=s.reportSumAddUnitFunc,c={name:"orderList",data:function(){return{active:0,beginDate:"",enDate:"",dateType:"",orderEnt:"",orderState:"",orderStateText:"",currentDate:new Date,datePickerShow:!1,reportOrderData:[],reportGoodsData:[],companyList:[],companyListShow:!1,stateList:[{name:"全部",value:""},{name:"待确认",value:"1"},{name:"待收货",value:"2"},{name:"已完成",value:"3"}],stateListShow:!1}},created:function(){this.getCompany()},methods:{dataPickerFormatter:function(t,e){return"".concat(e,"year"===t?"年":"month"===t?"月":"日")},beginDateClick:function(){this.dateType="begin",this.datePickerShow=!0},endDateClick:function(){this.dateType="end",this.datePickerShow=!0},dataConfirmhandle:function(t){"begin"===this.dateType?this.beginDate=this.$fxUtils.setDate(t):this.enDate=this.$fxUtils.setDate(t),this.datePickerShow=!1},getSum:function(t){return o(t,["orderSumMoney","deliverySumMoney"])},getSumGoodsReport:function(t){return o(t,["deliverySumMoney"])},onCompanySelect:function(t){this.orderEnt=t.name,this.companyListShow=!1},onStateSelect:function(t){this.orderState=t.value,this.orderStateText=t.name,this.stateListShow=!1},getCompany:function(){var t=this;this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/getOrderCompany")}).then(function(e){t.companyList=e})},getReportOrderData:function(t){var e=this;this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/sum4BillByMap"),data:t}).then(function(t){e.reportOrderData=t})},getReportGoodsData:function(t){var e=this;this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/sum4GoodsByMap"),data:t}).then(function(t){e.reportGoodsData=t})},searchHandler:function(){var t={companyName:this.orderEnt,beginDate:"".concat(this.beginDate," 00:00:01"),endDate:"".concat(this.enDate," 23:59:59"),jump:"1"};this.orderState&&(t.billState=this.orderState),0===this.active?this.getReportOrderData(t):this.getReportGoodsData(t)},rowClickHandle:function(t){var e=Object(n["a"])(t,2),a=e[0];e[1];this.$router.push({path:"/reportFormEnt",query:{companyName:a.companyName,beginDate:"".concat(this.beginDate," 00:00:01"),endDate:"".concat(this.enDate," 23:59:59")}})}}},l=c,d=(a("7e7a"),a("0c7c")),u=Object(d["a"])(l,i,r,!1,null,"2d44fe28",null);e["default"]=u.exports},dd2d:function(t,e,a){"use strict";var i=a("090c"),r=a.n(i);r.a},e248:function(t,e,a){},e344:function(t,e,a){t.exports=a.p+"src/assets/img/order-img.92a2369f.jpg"},e9f8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-order-itemDetails"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.maskShow,expression:"maskShow"}],staticClass:"item-details-mask",on:{click:t.maskClickHandler}}),a("div",{staticClass:"itemDetails-tools-bar clearfix"},[a("div",{staticClass:"class-btn",on:{click:t.classBtnHandle}},[a("i",{staticClass:"class-btn-icon fl-l"}),t._m(0)]),a("form",{staticClass:"search-form",attrs:{action:"/"}},[a("van-search",{staticClass:"itemDetails-search",attrs:{placeholder:"明细搜索,请输入搜索关键词"},on:{search:t.onSearch},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),a("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.billState,expression:"!billState"}],staticClass:"confirm-btn",attrs:{size:"small",type:"primary",round:""},on:{click:t.confirmHandle}},[t._v("\n\t\t\t\t提交\n\t\t\t")]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:"1"===t.billState,expression:"billState === '1'"}],staticClass:"confirm-btn",attrs:{size:"small",type:"primary",round:""},on:{click:t.saveHandle}},[t._v("\n\t\t\t\t保存\n\t\t\t")])],1),a("itemGrid",{ref:"item-grid",attrs:{itemGridData:t.gridData,isActive:t.rowActive,disabled:"2"===t.billState||"3"===t.billState},on:{itemCountClick:t.itemCountClickHandle}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.numberKeyboardShow,expression:"!numberKeyboardShow"}],staticClass:"itemDetails-bottom"},[a("div",{staticClass:"itemDetails-sum-box"},[t._m(1),a("div",{staticClass:"sum-box-count"},[a("div",[t._v("订货明细数："+t._s(t.itemSumLength))]),a("div",[t._v("订货品项数量："+t._s(t.itemSumCount))])]),a("div",{staticClass:"sum-box-price"},[t._v(t._s(t.itemSumPrice))])])]),a("van-popup",{staticClass:"slide-menu",attrs:{position:"left"},model:{value:t.slideMenu,callback:function(e){t.slideMenu=e},expression:"slideMenu"}},[a("div",{staticClass:"slideMenu-item"},[t._v("品项分类")]),a("div",{staticClass:"slideMenu-item",class:{"is-active":"selected"===t.bigClassActive},on:{click:function(e){t.bigClassClickHandler("selected")}}},[t._v("已选品项")]),a("div",{staticClass:"slideMenu-item"},[t._v("全部品项")]),t._l(t.bigClassData,function(e,i){return a("div",{key:i,staticClass:"slideMenu-item",class:{"is-active":i===t.bigClassActive},on:{click:function(e){t.bigClassClickHandler(i)}}},[t._v(t._s(e.name))])})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.numberKeyboardShow,expression:"numberKeyboardShow"}],staticClass:"details-number-keyboard"},[a("itemNumberKeyboard",{attrs:{title:t.keyboardTitle},on:{input:t.onKeyboardInput,pre:t.onKeyboardPre,next:t.onKeyboardNext,delete:t.onKeyboardDel}})],1)],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"class-btn-text fl-l"},[t._v("分"),a("br"),t._v("类")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sum-box-icon"},[a("i",{staticClass:"sum-icon"})])}],n=a("768b"),s=(a("a481"),a("b6d0")),o=a.n(s),c=a("774e"),l=a.n(c),d=(a("7f7f"),a("ac6a"),a("795b")),u=a.n(d),f=a("59ad"),v=a.n(f),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"itemDetails-grid"},[t._m(0),a("div",{ref:"grid-body",staticClass:"grid-body"},[a("van-collapse",{ref:"gridBody",attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.itemGridData,function(e,i){return a("van-collapse-item",{key:i,ref:"grid-row-"+i,refInFor:!0,staticClass:"grid-collapse-item",attrs:{name:i,border:!1,"is-link":!1}},[a("div",{staticClass:"grid-tr",class:{"is-active":t.isActiveTrClass(i),"has-amount":t.hasAmountTrClass(e.orderAmount)},attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"grid-td-itemName fx-ellipsis",on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(e.goodsName))]),a("div",{staticClass:"grid-td-unit",on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(e.unitName))]),a("div",{staticClass:"grid-td-price",on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(t._f("filterPrice")(e.priceNoTax)))]),a("div",{staticClass:"grid-td-count",on:{click:function(a){a.stopPropagation(),t.itemCountClickHandle(e.orderAmount,e,i)}}},[t._v(t._s(e.orderAmount))]),a("div",{staticClass:"grid-td-info",on:{click:function(a){t.remarkClick(e.remark)}}},[a("i",{staticClass:"grid-td-info-icon",class:{"grid-td-info-icon-active":""!==e.remark&&void 0!==e.remark}})])]),a("div",[a("van-field",{staticClass:"itemDetails-textarea",attrs:{type:"textarea",placeholder:"请输入备注信息(最多输入50个字符)",rows:"3",disabled:t.disabled},on:{blur:function(e){t.activeNames=""}},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)])}),1)],1)])},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid-title"},[a("div",{staticClass:"grid-td-itemName fx-ellipsis"},[t._v("品项名称")]),a("div",{staticClass:"grid-td-unit"},[t._v("单位")]),a("div",{staticClass:"grid-td-price"},[t._v("单价（元）")]),a("div",{staticClass:"grid-td-count"},[t._v("订货数量")]),a("div",{staticClass:"grid-td-info"},[t._v("备注")])])}],p=(a("c5f6"),function(){for(var t=0,e=["webkit","moz"],a=0;a<e.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[e[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[a]+"CancelAnimationFrame"]||window[e[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,a){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),n=window.setTimeout(function(){var t=i+r;e(t)},r);return t=i+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}),b=function(t){var e=t.offsetTop,a=void 0===e?0:e,i=t.$el,r=void 0===i?document.documentElement:i,n=t.distance,s=void 0===n?100:n;window.requestAnimationFrame||p();var o=null,c=r.scrollTop;cancelAnimationFrame(o),o=requestAnimationFrame(function t(){c<a?(c+=s,r.scrollTop=c,o=requestAnimationFrame(t)):(r.scrollTop=a,cancelAnimationFrame(o))})},y={name:"itemGrid",props:{itemGridData:{type:Array,default:function(){return[]}},isActive:[Number,String],disabled:{type:Boolean,default:!0}},data:function(){return{activeNames:""}},methods:{itemCountClickHandle:function(t,e,a){if(this.disabled)return!1;this.onSelectLetter(a),this.activeNames="",this.$emit("itemCountClick",[t,e,a])},onSelectLetter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,a=this.$refs["grid-row-".concat(t)][0].$el.offsetTop,i=this.$refs["grid-body"];b({offsetTop:a,$el:i,distance:e})},hasAmountTrClass:function(t){return v()(t)>0},isActiveTrClass:function(t){return this.isActive===t},remarkClick:function(t){!t&&this.disabled&&event.stopPropagation()}}},C=y,D=(a("f79c"),a("f6f8"),a("0c7c")),g=Object(D["a"])(C,m,h,!1,null,"3ee1cc68",null),k=g.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-number-keyboard"},[a("div",{staticClass:"number-keyboard-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"number-keyboard-content"},[a("div",{staticClass:"keyboard-number"},[a("div",{staticClass:"keyboard-number-row"},[a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("1")}}},[t._v("1")]),a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("2")}}},[t._v("2")]),a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("3")}}},[t._v("3")])]),a("div",{staticClass:"keyboard-number-row"},[a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("4")}}},[t._v("4")]),a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("5")}}},[t._v("5")]),a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("6")}}},[t._v("6")])]),a("div",{staticClass:"keyboard-number-row"},[a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("7")}}},[t._v("7")]),a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("8")}}},[t._v("8")]),a("i",{staticClass:"keyboard-btn-1",on:{click:function(e){t.numberBtnClick("9")}}},[t._v("9")])]),a("div",{staticClass:"keyboard-number-row"},[a("i",{staticClass:"keyboard-btn-2 keyboard-btn-zero",on:{click:function(e){t.numberBtnClick("0")}}},[t._v("0")]),a("i",{staticClass:"keyboard-btn-1 keyboard-btn-dot",on:{click:function(e){t.numberBtnClick(".")}}},[t._v(".")])])]),a("div",{staticClass:"keyboard-control"},[a("i",{staticClass:"keyboard-btn-2 keyboard-btn-del",on:{click:t.delBtnClick}}),a("i",{staticClass:"keyboard-btn-3 keyboard-btn-pre",on:{click:t.preBtnClick}},[t._v("上一个")]),a("i",{staticClass:"keyboard-btn-3 keyboard-btn-next",on:{click:t.nextBtnClick}},[t._v("下一个")])])])])},_=[],x={name:"itemNumberKeyboard",props:{title:String},methods:{numberBtnClick:function(t){this.$emit("input",t)},delBtnClick:function(){this.$emit("delete")},preBtnClick:function(){this.$emit("pre")},nextBtnClick:function(){this.$emit("next")}}},S=x,A=(a("42d4"),Object(D["a"])(S,w,_,!1,null,"1de8afd5",null)),I=A.exports,N={name:"orderItemDetails",components:{itemGrid:k,itemNumberKeyboard:I},data:function(){return{billId:this.$route.query.id,billState:this.$route.query.billState,searchValue:"",bigClassActive:"",allClassItemData:[],gridData:[],bigClassData:[],currentSelectItem:[],slideMenu:!1,numberKeyboardShow:!1,keyboardTitle:"",rowActive:"",maskShow:!1}},created:function(){var t=this;void 0===this.billState?this.getOrderPlanDetail().then(function(e){t.initAllClassItemData(e)}):this.getBillAndDetails().then(function(e){t.initAllClassItemData(e)})},computed:{itemSumLength:function(){var t=this.getCurrentSelectItem();return t.length},itemSumCount:function(){var t=this.getCurrentSelectItem(),e=t.reduce(function(t,e){return t+(e.orderAmount-0)},0);return e},itemSumPrice:function(){var t="",e=this.getCurrentSelectItem();return t=e.reduce(function(t,e){var a=v()(t)+v()(e.priceNoTax)*v()(e.orderAmount);return a},0),this.$fxUtils.toFixedSHW(t,2)}},watch:{bigClassActive:function(t){"selected"===t?(this.currentSelectItem=this.getCurrentSelectItem(),this.gridData=this.currentSelectItem):this.gridData=this.allClassItemData[t].detailDTOS},rowActive:function(t){if(""!==t){var e=this.gridData[t];this.keyboardTitle="".concat(e.goodsName,"(").concat(e.unitName,")")}}},methods:{getOrderPlanDetail:function(){var t=this;return new u.a(function(e){var a={companyName:t.$route.query.companyName,planID:t.$route.query.planID,rdcId:t.$route.query.rdcId};t.$fxHttp.requestPost({url:"".concat(t.$fxBaseApi.url,"/getOrderPlanDetail"),data:a}).then(function(t){e(t)})})},initAllClassItemData:function(t){t.forEach(function(t){t.detailDTOS.forEach(function(t){t.planDtId=t.id,t.orderAmount||(t.orderAmount="0")})});var e=t.map(function(t){return{id:t.id,name:t.name}});e.length>0&&(this.bigClassActive=0),this.bigClassData=e,this.allClassItemData=t},getBillAndDetails:function(){var t=this;return new u.a(function(e){var a={id:t.$route.query.id};t.$fxHttp.requestPost({url:"".concat(t.$fxBaseApi.url,"/getBillAndDetails"),data:a}).then(function(a){t.translateBillData(a.details).then(function(t){e(t)})})})},translateBillData:function(t){return new u.a(function(e){var a=t.map(function(t){return t.goodsTypeId});a=l()(new o.a(a));var i=a.map(function(e){var a={id:e},i=t.filter(function(t){return t.goodsTypeId===e});return a.name=i[0].goodsName,a.detailDTOS=i,a});e(i)})},confirmHandle:function(){var t=this,e={organId:this.$route.query.rdcId,organName:this.$route.query.rdcName,receiptInfoId:"",companyId:this.$route.query.companyId,companyName:this.$route.query.companyName,planId:this.$route.query.planID,arriveDateInterval:this.$route.query.arriveDateInterval,details:this.getCurrentSelectItem()};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/saveBill"),data:e}).then(function(e){t.$router.replace({path:"/orderDetails",query:{id:e.id}})})},saveHandle:function(){var t=this,e={id:this.$route.query.id,organId:this.$route.query.rdcId,organName:this.$route.query.rdcName,receiptInfoId:this.$route.query.receiptInfoId,companyId:this.$route.query.companyId,companyName:this.$route.query.companyName,planId:this.$route.query.planID,details:this.getCurrentSelectItem()};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/updateBill"),data:e}).then(function(e){t.$toast.success("保存成功")})},onSearch:function(){console.log("搜索")},classBtnHandle:function(){this.slideMenu=!this.slideMenu},itemCountClickHandle:function(t){var e=Object(n["a"])(t,3),a=(e[0],e[1],e[2]);this.rowActive=a,this.numberKeyboardShow=!0,this.maskShow=!0},bigClassClickHandler:function(t){this.bigClassActive=t},closeKeyboard:function(){this.rowActive=""},onKeyboardInput:function(t){this.setItemCount(t)},onKeyboardPre:function(){if(!this.rowActive)return!1;this.rowActive--,this.$refs["item-grid"].onSelectLetter(this.rowActive,5)},onKeyboardNext:function(){if(""===this.rowActive||this.rowActive===this.gridData.length-1)return!1;this.rowActive++,this.$refs["item-grid"].onSelectLetter(this.rowActive,5)},setItemCount:function(t){var e=this.gridData[this.rowActive].orderAmount+"";return(-1!==e.indexOf(".")||4!==e.length||"."===t)&&((-1===e.indexOf(".")||"."!==t)&&((-1===e.indexOf(".")||7!==e.length)&&void("0"===e?this.gridData[this.rowActive].orderAmount=t:this.gridData[this.rowActive].orderAmount+=t)))},onKeyboardDel:function(t){var e=this.gridData[this.rowActive].orderAmount+"";if("0"===e)return!1;e=1===e.length?"0":e.substr(0,e.length-1),this.gridData[this.rowActive].orderAmount=e},maskClickHandler:function(){"selected"===this.rowActive&&this.copyCurrentItemAmount(),this.maskShow=!1,this.numberKeyboardShow=!1,this.rowActive=""},getCurrentSelectItem:function(){var t=this.allClassItemData.reduce(function(t,e){var a=e.detailDTOS.filter(function(t){return v()(t.orderAmount)>0});return t=t.concat(a),t},[]);return t},copyCurrentItemAmount:function(){var t=this;this.currentSelectItem.forEach(function(e){t.allClassItemData.forEach(function(t){t.detailDTOS.forEach(function(t){e.id===t.id&&(t.orderAmount=e.orderAmount)})})})}}},$=N,E=(a("8322"),a("0fe2"),Object(D["a"])($,i,r,!1,null,"1812f173",null));e["default"]=E.exports},f228:function(t,e,a){var i=a("40c3"),r=a("4517");t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray},f6f8:function(t,e,a){"use strict";var i=a("d432"),r=a.n(i);r.a},f79c:function(t,e,a){"use strict";var i=a("5e21"),r=a.n(i);r.a},fa2b:function(t,e,a){a("c207"),a("1654"),a("6c1c"),a("07d8"),a("74be"),a("c6fb"),a("57e3"),t.exports=a("584a").Set},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},ff18:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-order-list"},[a("van-tabs",{staticClass:"order-list-tab",attrs:{color:"#4c96f3"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"全部"}}),a("van-tab",{attrs:{title:"待确认"}}),a("van-tab",{attrs:{title:"待收货"}}),a("van-tab",{attrs:{title:"已完成"}})],1),a("div",{staticClass:"order-list-warp"},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.orderListData,function(e,i){return a("div",{key:i,staticClass:"order-list-item fx-edi-block"},[a("div",{staticClass:"order-ent"},[t._v(t._s(e.organName))]),t._l(e.bills,function(e,i){return a("orderBlock",{key:i,attrs:{orderData:e},on:{click:t.orderItemClick}})})],2)}),0)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-block",on:{click:t.clickHandler}},[a("stateTag",{staticClass:"order-item-state",attrs:{billState:t.orderData.billState}}),a("div",{staticClass:"order-item-title"},[a("div",{staticClass:"order-item-number"},[t._v("订单编号："+t._s(t.orderData.billNo))])]),a("div",{staticClass:"order-item-details"},[a("div",{staticClass:"order-item-row"},[a("div",{staticClass:"order-item-count order-item-cell"},[t._v("明细数量："+t._s(t.orderData.billDtCount))]),a("div",{staticClass:"order-item-sumCount order-item-cell"},[t._v("数量合计："+t._s(t.orderData.goodsCount))])]),a("div",{staticClass:"order-item-sumPrice order-item-cell"},[t._v("金额合计："+t._s(t.orderData.sumMoneyWithTax))]),a("div",{staticClass:"order-item-date order-item-cell"},[t._v("下单时间："+t._s(t.orderData.makeDate))])])],1)},s=[],o=a("84df"),c={name:"orderBlock",props:{orderData:{type:Object,default:function(){}}},components:{stateTag:o["a"]},methods:{clickHandler:function(){this.$emit("click",this.orderData)}}},l=c,d=(a("dd2d"),a("0c7c")),u=Object(d["a"])(l,n,s,!1,null,"d0a44198",null),f=u.exports,v={name:"orderList",components:{orderBlock:f},data:function(){return{active:"",orderListData:[],loading:!1,finished:!0}},created:function(){this.setTabActive(this.$route.query.billState)},watch:{active:function(t){this.getQueryAllBill(this.title2State(t))}},methods:{setTabActive:function(t){switch(t){case"1":this.active=1;break;case"2":this.active=2;break;case"3":this.active=3;break;default:this.active=0;break}},onLoad:function(){console.log("加载更多数据")},title2State:function(t){switch(t){case 0:return"";case 1:return"1";case 2:return"2";case 3:return"3"}},getQueryAllBill:function(t){var e=this,a={billState:t};this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/queryAllBill"),data:a}).then(function(t){e.orderListData=t})},orderItemClick:function(t){this.$router.push({path:"/orderDetails",query:{id:t.id}})}}},m=v,h=(a("c102"),Object(d["a"])(m,i,r,!1,null,"24428954",null));e["default"]=h.exports}}]);
//# sourceMappingURL=order.57f38d3a.js.map