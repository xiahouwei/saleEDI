(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{1356:function(t,e,a){},"1af6":function(t,e,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"1ff0":function(t,e,a){t.exports=a.p+"src/assets/img/icon-confirm.596fe1ac.png"},4649:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-me"},[a("div",{staticClass:"me-top"},[a("div",{staticClass:"me-log"}),a("div",{staticClass:"me-user"},[t._m(0),a("div",{staticClass:"me-name"},[t._v("小狮子")]),a("van-icon",{staticClass:"me-arrow",attrs:{name:"arrow"}})],1)]),a("div",{staticClass:"order-manage-box"},[a("div",{staticClass:"me-order-manage"},[a("div",{staticClass:"order-mange-title"},[a("div",{staticClass:"title-name"},[t._v("订单管理")]),a("div",{staticClass:"see-all-order fl-r",on:{click:t.seeAllOrderHandle}},[t._v("查看全部订单"),a("van-icon",{staticClass:"me-arrow",attrs:{name:"arrow"}})],1)]),a("div",{staticClass:"order-manage-module"},[a("orderManage",{attrs:{orderManageData:t.manageModule},on:{manageModuleClick:t.billClickHandler}})],1)])]),a("div",{staticClass:"me-menu-list"},[a("van-cell",{attrs:{title:"报表查询","is-link":"",to:"/reportForm"}},[a("i",{staticClass:"report-form-icon",attrs:{slot:"icon"},slot:"icon"})]),a("van-cell",{attrs:{title:"收货地址","is-link":"",to:"/addressList"}},[a("i",{staticClass:"reciveing-address-icon",attrs:{slot:"icon"},slot:"icon"})]),a("van-cell",{attrs:{title:"我的信息","is-link":"",to:"/userInfo"}},[a("i",{staticClass:"user-info-icon",attrs:{slot:"icon"},slot:"icon"})]),a("van-cell",{attrs:{title:"订货企业","is-link":"",to:"/orderEnt"}},[a("i",{staticClass:"order-ent-icon",attrs:{slot:"icon"},slot:"icon"})])],1)])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"me-avatar"},[i("img",{staticClass:"avatar-img",attrs:{src:a("7745")}})])}],r=a("82d6"),s={name:"me",components:{orderManage:r["a"]},data:function(){return{manageModule:{toBeConfirmed:{label:"待确认",iconSrc:a("6ea0"),waring:"0",billState:"1",showFlag:!0},toBeReceived:{label:"待收货",iconSrc:a("89fc"),waring:"0",billState:"2",showFlag:!0},toBeFinished:{label:"已完成",iconSrc:a("1ff0"),waring:"0",billState:"3",showFlag:!0}}}},created:function(){this.getToDOWork()},methods:{seeAllOrderHandle:function(){this.$router.push("/orderList")},billClickHandler:function(t){var e=t.billState;this.$router.push({path:"/orderList",query:{billState:e}})},getToDOWork:function(){var t=this;this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/getToDOWork")}).then(function(e){t.setToWork(e)})},setToWork:function(t){for(var e in t)this.manageModule[e].waring=t[e]}}},o=s,c=(a("61da"),a("0c7c")),l=Object(c["a"])(o,i,n,!1,null,"92dd8c80",null);e["default"]=l.exports},"469f":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("7d7b")},"4bb2":function(t,e,a){},"4f1f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-order"},[a("div",{staticClass:"saleedi-order-title"},[t._v("\n\t\t待确认订单\n\t\t"),a("div",{staticClass:"edit-btn fl-r",on:{click:t.editBtnClick}},[t._v(t._s(t.editBtnText))])]),a("div",{staticClass:"order-wrap"},t._l(t.orderData,function(e,i){return a("div",{key:i,staticClass:"order-block fx-edi-block"},[a("div",{staticClass:"order-ent-cell"},[a("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.orderEditFlag,expression:"orderEditFlag"}],staticClass:"order-checkbox",on:{change:function(e){t.entCheckboxChange(arguments,i)}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}}),a("div",{staticClass:"order-ent"},[t._v(t._s(e.organName))])],1),a("div",{staticClass:"order-list"},t._l(e.bills,function(e,i){return a("div",{key:i,staticClass:"order-list-item",on:{click:function(a){t.orderItemClick(e.id)}}},[a("stateTag",{staticClass:"order-item-state",attrs:{billState:e.billState}}),a("div",{staticClass:"order-item-title"},[a("div",{staticClass:"order-item-number"},[t._v("订单编号："+t._s(e.billNo))])]),a("div",{staticClass:"order-item-details"},[a("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.orderEditFlag,expression:"orderEditFlag"}],staticClass:"order-details-checkbox",model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"listItem.checked"}}),a("div",{staticClass:"order-item-row"},[a("div",{staticClass:"order-item-count order-item-cell"},[t._v("明细数量："+t._s(e.billDtCount))]),a("div",{staticClass:"order-item-sumCount order-item-cell"},[t._v("数量合计："+t._s(e.goodsCount))])]),a("div",{staticClass:"order-item-sumPrice order-item-cell"},[t._v("金额合计："+t._s(e.sumMoneyWithTax))]),a("div",{staticClass:"order-item-date order-item-cell"},[t._v("下单时间："+t._s(e.makeDate))])],1)],1)}),0)])}),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.orderEditFlag,expression:"orderEditFlag"}],staticClass:"order-bottom"},[a("van-checkbox",{staticClass:"select-all-checkbox",model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}},[t._v("全选")]),a("div",{staticClass:"order-bottom-text"},[t._v("已选"+t._s(t.selectCountCoumpted)+"条订单")]),a("van-button",{attrs:{type:"danger",square:""}},[t._v("删除订单")])],1)])},n=[],r=a("795b"),s=a.n(r),o=(a("ac6a"),a("84df")),c={name:"order",components:{stateTag:o["a"]},data:function(){return{orderData:[],orderEditFlag:!1,selectAll:!1}},created:function(){this.orderListInit()},watch:{selectAll:function(t){this.orderData.forEach(function(e){e.checked=t,e.bills.forEach(function(e){e.checked=t})})}},computed:{editBtnText:function(){return this.orderEditFlag?"完成":"编辑"},selectCountCoumpted:function(){var t=[];this.orderData.forEach(function(e){t=t.concat(e.bills)});var e=t.filter(function(t){return!0===t.checked});return e.length}},methods:{orderListInit:function(){var t=this;this.getQueryAllBill().then(function(e){e.forEach(function(t){t.checked=!1,t.bills.forEach(function(t){t.checked=!1})}),t.orderData=e})},getQueryAllBill:function(){var t=this;return new s.a(function(e){var a={billState:""};t.$fxHttp.requestPost({url:"".concat(t.$fxBaseApi.url,"/queryAllBill"),data:a}).then(function(t){e(t)})})},editBtnClick:function(){this.orderEditFlag=!this.orderEditFlag},entCheckboxChange:function(t,e){var a=t[0];this.orderData[e].bills.forEach(function(t){t.checked=a})},orderItemClick:function(t){if(this.orderEditFlag)return!1;this.$router.push({path:"/orderDetails",query:{id:t}})}}},l=c,d=(a("91fd"),a("0c7c")),u=Object(d["a"])(l,i,n,!1,null,"2f1339f6",null);e["default"]=u.exports},"5d73":function(t,e,a){t.exports=a("469f")},"5df3":function(t,e,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})})},"60f7":function(t,e,a){},"61da":function(t,e,a){"use strict";var i=a("75b4"),n=a.n(i);n.a},"6cc7":function(t,e,a){"use strict";var i=a("837f"),n=a.n(i);n.a},"6ea0":function(t,e,a){t.exports=a.p+"src/assets/img/icon-beforeConfirm.7c8c6215.png"},"75b4":function(t,e,a){},"768b":function(t,e,a){"use strict";var i=a("a745"),n=a.n(i);function r(t){if(n()(t))return t}var s=a("5d73"),o=a.n(s);function c(t,e){var a=[],i=!0,n=!1,r=void 0;try{for(var s,c=o()(t);!(i=(s=c.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(l){n=!0,r=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(n)throw r}}return a}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(t,e){return r(t)||c(t,e)||l()}a.d(e,"a",function(){return d})},7745:function(t,e,a){t.exports=a.p+"src/assets/img/shanglong-logo.a2ec8ef1.jpg"},"7d7b":function(t,e,a){var i=a("e4ae"),n=a("7cd6");t.exports=a("584a").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},"7f7f":function(t,e,a){var i=a("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,s="name";s in n||a("9e1e")&&i(n,s,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"82d6":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manage-module-row"},t._l(t.orderManageData,function(e,i){return a("div",{key:i,staticClass:"manage-module-item",on:{click:function(a){t.billClickHandler(e)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showFlag,expression:"item.showFlag"}],staticClass:"manage-module-item-block",class:{"fx-red-dot":parseFloat(e.waring)>0}},[a("img",{staticClass:"manage-module-item-icon",attrs:{src:e.iconSrc}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.showFlag,expression:"item.showFlag"}]},[t._v(t._s(e.label))])])}),0)},n=[],r={name:"manageModule",props:{orderManageData:{type:Object,default:function(){return{}}}},methods:{billClickHandler:function(t){this.$emit("manageModuleClick",t)}}},s=r,o=(a("943b"),a("0c7c")),c=Object(o["a"])(s,i,n,!1,null,"a46b3e56",null);e["a"]=c.exports},"837f":function(t,e,a){},"84df":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-tag",{attrs:{mark:"",type:t.tagType,size:"large"}},[t._v(t._s(t.billStateText))])},n=[],r={name:"stateTag",props:{billState:String},computed:{billStateText:function(){var t="";switch(this.billState){case"1":t="待确认";break;case"2":t="待收货";break;case"3":t="已完成";break}return t},tagType:function(){var t="";switch(this.billState){case"1":t="danger";break;case"2":t="primary";break;case"3":t="success";break}return t}}},s=r,o=a("0c7c"),c=Object(o["a"])(s,i,n,!1,null,null,null);e["a"]=c.exports},"89fc":function(t,e,a){t.exports=a.p+"src/assets/img/icon-beforeReceiving.0021a07e.png"},"91fd":function(t,e,a){"use strict";var i=a("60f7"),n=a.n(i);n.a},"943b":function(t,e,a){"use strict";var i=a("1356"),n=a.n(i);n.a},"969c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-main"},[a("router-view",{staticClass:"saleedi-content",attrs:{"keep-alive":""}}),a("van-tabbar",{staticClass:"saleedi-tabbar",on:{change:t.tabbarChange},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[a("van-tabbar-item",{attrs:{icon:"search"}},[t._v("发现")]),a("van-tabbar-item",{attrs:{icon:"orders-o"}},[t._v("订单")]),a("van-tabbar-item",{attrs:{icon:"friends-o"}},[t._v("我的")])],1)],1)},n=[],r=(a("a481"),{name:"home",data:function(){return{tabActive:0,routeList:[{path:"find"},{path:"order"},{path:"me"}]}},created:function(){this.tabActive=this.$route.meta&&this.$route.meta.tabIndex},mounted:function(){window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1))},destroyed:function(){window.removeEventListener("popstate",this.goBack,!1)},watch:{$route:function(t){this.tabActive=t.meta&&t.meta.tabIndex}},methods:{tabbarChange:function(t){this.$router.push(this.routeList[t])},goBack:function(){this.$router.replace("/home/find")}}}),s=r,o=(a("9e60"),a("0c7c")),c=Object(o["a"])(s,i,n,!1,null,"1648a162",null);e["default"]=c.exports},"9e60":function(t,e,a){"use strict";var i=a("4bb2"),n=a.n(i);n.a},a745:function(t,e,a){t.exports=a("f410")},f1a4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"saleedi-find"},[a("div",{staticClass:"ent-list"},[t._l(t.companyList,function(e,i){return a("div",{key:i,staticClass:"ent-block"},[a("div",{staticClass:"ent-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"ent-btn",on:{click:function(a){t.createOrder(e)}}},[t._v("前往订货"),a("van-icon",{staticClass:"btn-arrow",attrs:{name:"arrow"}})],1)])}),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.companyList.length,expression:"companyList.length === 0"}],staticClass:"add-btn-block"},[a("van-button",{staticClass:"add-btn",attrs:{type:"primary",round:""},on:{click:t.addEntClick}},[t._v("+ 添加订货企业")])],1)],2),a("div",{staticClass:"order-manage fx-edi-block"},[a("div",{staticClass:"block-title"},[t._v("订单管理")]),a("div",{staticClass:"order-manage-module"},[a("orderManage",{attrs:{orderManageData:t.manageModule},on:{manageModuleClick:t.billClickHandler}})],1)])])},n=[],r=(a("7f7f"),a("768b")),s=a("795b"),o=a.n(s),c=(a("ac6a"),a("5df3"),a("82d6")),l={name:"find",components:{orderManage:c["a"]},data:function(){return{manageModule:{toBeConfirmed:{label:"待确认",iconSrc:a("6ea0"),waring:"0",billState:"1",showFlag:!0},toBeReceived:{label:"待收货",iconSrc:a("89fc"),waring:"0",billState:"2",showFlag:!0},toBeFinished:{label:"已完成",iconSrc:a("1ff0"),waring:"0",billState:"3",showFlag:!0},notUse:{label:"点我",iconSrc:a("1ff0"),waring:"0",billState:"",showFlag:!0}},companyList:[]}},created:function(){this.getHomeData()},methods:{getHomeData:function(){var t=this;o.a.all([this.getCompany(),this.getToDOWork()]).then(function(e){var a=Object(r["a"])(e,2),i=a[0],n=a[1];t.companyList=i,t.setToWork(n)})},getCompany:function(){var t=this;return new o.a(function(e){t.$fxHttp.requestPost({url:"".concat(t.$fxBaseApi.url,"/getOrderCompany")}).then(function(t){e(t)})})},getToDOWork:function(){var t=this;return new o.a(function(e){t.$fxHttp.requestPost({url:"".concat(t.$fxBaseApi.url,"/getToDOWork")}).then(function(t){e(t)})})},setToWork:function(t){for(var e in t)this.manageModule[e].waring=t[e]},createOrder:function(t){this.$router.push({path:"/createOrder",query:{companyName:t.name,companyId:t.id}})},billClickHandler:function(t){if(""===t.billState)this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/9001 ")}).then(function(t){console.log(t)});else{var e=t.billState;this.$router.push({path:"/orderList",query:{billState:e}})}},addEntClick:function(){this.$router.push({path:"/bindEnt",query:{notFirst:!0}})}}},d=l,u=(a("6cc7"),a("0c7c")),f=Object(u["a"])(d,i,n,!1,null,"494f3640",null);e["default"]=f.exports},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);
//# sourceMappingURL=home.86d66b82.js.map